<!DOCTYPE html>
<html lang="en">
    @@include('html/_head.htm',{ "title":"HomePage" })
    <body>
        <div class="wrapper">
            @@include('html/_header.htm',{})
            <main class="page">
                @@include('html/_about-write.htm',{})
                @@include('html/_modern.htm',{}) @@include('html/_whom.htm',{})
                @@include('html/_format.htm',{})
                @@include('html/_activation.htm',{})
                @@include('html/_join.htm',{}) @@include('html/_reg-now.htm',{})
                @@include('html/_author.htm',{})
                @@include('html/_reviews.htm',{})
                @@include('html/_learning.htm',{})
                @@include('html/_steps.htm',{}) @@include('html/_price.htm',{})
                @@include('html/_classes.htm',{})
                @@include('html/_ceremony.htm',{})
            </main>

            @@include('html/_popup.htm',{}) @@include('html/_footer.htm',{})
        </div>
        @@include('html/_js.htm',{})
        <script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/11.0.14/js/utils.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.11/jquery.mask.js"></script>
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/intl-tel-input@17.0.3/build/css/intlTelInput.css"
        />
        <script src="https://cdn.jsdelivr.net/npm/intl-tel-input@17.0.3/build/js/intlTelInput.js"></script>

        <script src="//cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/ScrollMagic.min.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/plugins/debug.addIndicators.min.js"></script>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/2.1.3/TweenMax.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/2.1.3/TimelineMax.min.js"></script>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/plugins/animation.gsap.min.js"></script>

        <script>
            // MODERN АНИМАЦИЯ УВЕЛЕЧЕНИЯ ВО ВТОРОЙ СЕКЦИИ //
            var controller = new ScrollMagic.Controller();
            var tween = TweenMax.to(".modern__image-img", 0.5, {
                css: { scale: 1 },
                ease: Linear.easeNone,
            });

            var scene = new ScrollMagic.Scene({
                triggerElement: ".modern",
                duration: "100%",
                triggerHook: 0,
            })
                .setTween(tween)
                // .addIndicators()
                .addTo(controller)
                .on("enter", function (event) {
                    // $(".modern").css("position", "fixed");
                })
                .on("leave", function (event) {
                    // alert("leave");
                });

            // **MODERN АНИМАЦИЯ УВЕЛЕЧЕНИЯ ВО ВТОРОЙ СЕКЦИИ** //
            // FORMAT АНИМАЦИЯ ПУТИ //

            var scane_scircles = new ScrollMagic.Scene({
                triggerElement: ".format",
                duration: "100%",
                offset: 200,
            })

                .addTo(controller)
                // .addIndicators()
                .on("enter", function (e) {
                    const format_items_right = document.querySelectorAll(
                        ".format__item-circle-right"
                    );
                    format_items_right.forEach((item) => {
                        item.classList.add("-circle-revers-right");
                    });

                    const format_items_left = document.querySelectorAll(
                        ".format__item-circle-left"
                    );
                    format_items_left.forEach((item) => {
                        item.classList.add("-circle-revers-left");
                    });
                })
                .on("leave", function (e) {
                    const format_items_right = document.querySelectorAll(
                        ".format__item-circle-right"
                    );
                    format_items_right.forEach((item) => {
                        item.classList.remove("-circle-revers-right");
                    });

                    const format_items_left = document.querySelectorAll(
                        ".format__item-circle-left"
                    );
                    format_items_left.forEach((item) => {
                        item.classList.remove("-circle-revers-left");
                    });
                });

            // activation__line--1
            new ScrollMagic.Scene({
                triggerElement: ".activation__line--1",
                duration: $(".activation__line--1").height(),
            })
                .addTo(controller)
                // .addIndicators()
                .on("progress", function (e) {
                    var myline = document.getElementById("activation__line--1");
                    var length = myline.getTotalLength();
                    myline.style.strokeDasharray = length;
                    myline.style.strokeDashoffset = length;
                    var draw = length * e.progress.toFixed(3);
                    myline.style.strokeDashoffset = length - draw;
                })
                .on("leave", function (event) {
                    $(".activation__item--2").addClass("fade-down");
                });

            // activation__line--2
            new ScrollMagic.Scene({
                triggerElement: ".activation__line--2",
                duration: $(".activation__line--2").height(),
            })
                .addTo(controller)
                // .addIndicators()
                .on("progress", function (e) {
                    var myline = document.getElementById("activation__line--2");
                    var length = myline.getTotalLength();
                    myline.style.strokeDasharray = length;
                    myline.style.strokeDashoffset = length;
                    var draw = length * e.progress.toFixed(3);
                    myline.style.strokeDashoffset = length - draw;
                })
                .on("leave", function (event) {
                    $(".activation__item--3").addClass("fade-down");
                });

            // activation__line--3
            new ScrollMagic.Scene({
                triggerElement: ".activation__line--3",
                duration: $(".activation__line--3").height(),
            })
                .addTo(controller)
                // .addIndicators()
                .on("progress", function (e) {
                    var myline = document.getElementById("activation__line--3");
                    var length = myline.getTotalLength();
                    myline.style.strokeDasharray = length;
                    myline.style.strokeDashoffset = length;
                    var draw = length * e.progress.toFixed(3);
                    myline.style.strokeDashoffset = length - draw;
                })
                .on("leave", function (event) {
                    $(".activation__item--4").addClass("fade-down");
                });

            // activation__line--4
            new ScrollMagic.Scene({
                triggerElement: ".activation__line--4",
                duration: $(".activation__line--4").height(),
            })
                .addTo(controller)
                // .addIndicators()
                .on("progress", function (e) {
                    var myline = document.getElementById("activation__line--4");
                    var length = myline.getTotalLength();
                    myline.style.strokeDasharray = length;
                    myline.style.strokeDashoffset = length;
                    var draw = length * e.progress.toFixed(3);
                    myline.style.strokeDashoffset = length - draw;
                })
                .on("leave", function (event) {
                    $(".activation__item--5").addClass("fade-down");
                });

            // activation__line--4
            var scene_reg_now = new ScrollMagic.Scene({
                triggerElement: ".reg-now__container",
                duration: "1%", // Длительность сцены - 100% высоты страницы
                triggerHook: 0, // Триггер срабатывает, когда верхнее края сцены достигает верхнего края страницы
                offset: -400,
            })
                // Добавляем индикаторы (опционально)
                // .addIndicators({ name: "Scene" })
                // Добавляем анимацию с помощью GSAP
                .on("enter", function (event) {
                    document
                        .querySelectorAll(".reg-now__radion-svg")
                        .forEach(function (element) {
                            element.classList.add("move-right");
                        });
                    $(".reg-now__item").addClass("glow");
                })
                // scene_reg_now.destroy();
                // Добавляем сцену на контроллер
                .addTo(controller);
        </script>

        <script>
            var input = document.querySelector("#phone");
            var iti = window.intlTelInput(input, {
                preferredCountries: ["gb"],
                formatOnDisplay: true,
                //separateDialCode: true,
                utilsScript:
                    "https://cdn.jsdelivr.net/npm/intl-tel-input@17.0.3/build/js/utils.js",
                initialCountry: "auto",
                geoIpLookup: function (success, failure) {
                    $.get("https://ipinfo.io", function () {}, "jsonp").always(
                        function (resp) {
                            var countryCode =
                                resp && resp.country ? resp.country : "us";
                            success(countryCode);
                            //   var mask1 = $("#phone").attr('placeholder').replace(/[0-9]/g, 0);
                            //   $('#phone').mask(mask1);
                        }
                    );
                },
            });
            window.iti = iti;

            $("#phone").on("countrychange", function (e, countryData) {
                $("#phone").val("");
                var mask1 = $("#phone")
                    .attr("placeholder")
                    .replace(/[0-9]/g, 0);
                $("#phone").mask(mask1);
            });
        </script>

        <style>
            #circle {
                fill: #359f64;
            }

            .st0 {
                stroke: #359f64;
            }

            .mask-style {
            }
        </style>

        <script></script>
    </body>
</html>
